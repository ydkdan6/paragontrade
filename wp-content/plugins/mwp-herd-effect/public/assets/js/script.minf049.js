/*! ========= INFORMATION ============================
    - document:  Wow Herd Effects Pro
	- brand:     Wow-Company
	- brand-url: https://wow-company.com/
    - store-url: https://wow-estore.com/
	- author:    Dmytro Lobov
	- url:       https://wow-estore.com/item/wow-herd-effects-pro/
==================================================== */
"use strict";class HerdEffects{constructor(e,t={}){this.element=e,this.elementId=e.getAttribute("id"),this.textBox=e.querySelector(".wow-notification-text-block"),this.context=this.textBox.innerHTML,this.closeBtn=e.querySelector(".wow-notification-close"),this.number=this.getStorage("number"),this.checkClose=this.getStorage("checkClose"),this.settings=Object.assign({variables:{amount:[1e3,2500],1:["Emma","Noah","Olivia","Liam","Ava","William"],2:["Bangkok","London","Paris","Dubai","New York","Singapore"]},openTime:{type:"stable",min:5,max:10},closeTime:7,number:3,animation:{open:"bounceIn",close:"bounceOut"},link:{enabled:!1,content:"https://wow-estore.com/item/wow-herd-effects-pro/",target:"_blank",hide:!1},geotargeting:{enabled:!1,countries:[]},screenMax:{enabled:!1,breakpoint:1024},screenMin:{enabled:!1,breakpoint:480},style:{}},t),this.screen=screen.width,this.init().catch((e=>console.error(e)))}async init(){let e=await this.geoTargeting();this.style(),(0===this.settings.number||this.number<this.settings.number&&0===this.checkClose)&&!0===e&&!0===this.checkDevices()&&this.open(),this.clickClose(),this.setLink()}style(){this.element.style.cssText=this.objectToString(this.settings.style)}setLink(){!0===this.settings.link.enabled&&(this.element.addEventListener("click",function(e){e.target!==this.closeBtn&&(!0===this.settings.link.hide&&this.forceClose(),window.open(this.settings.link.content,this.settings.link.target))}.bind(this)),this.element.classList.add("is-clickable"))}clickClose(){null!==this.closeBtn&&this.closeBtn.addEventListener("click",function(){this.forceClose()}.bind(this))}forceClose(){this.checkClose++,this.setStorage("checkClose",this.checkClose),this.element.classList.remove(this.settings.animation.open),this.element.classList.add(this.settings.animation.close),this.element.classList.add("is-deactivated")}open(){const e=this.getTime();setTimeout(function(){this.element.classList.remove(this.settings.animation.close),this.element.classList.add("is-activated"),this.element.classList.add(this.settings.animation.open),this.inputContent(),this.close(),this.number++,this.setStorage("number",this.number)}.bind(this),e)}close(){const e=1e3*parseInt(this.settings.closeTime);setTimeout(function(){this.element.classList.remove(this.settings.animation.open),this.element.classList.add(this.settings.animation.close),setTimeout(function(){this.element.classList.remove("is-activated")}.bind(this),1e3),(0===this.settings.number||this.number<this.settings.number&&0===this.checkClose)&&this.open()}.bind(this),e)}inputContent(){let e=this.context;for(let[t,s]of Object.entries(this.settings.variables))if(isNaN(t)&&e.includes(`[${t}]`)){const t=Math.floor(Math.random()*(parseFloat(this.settings.variables.amount[0])-parseFloat(this.settings.variables.amount[1])))+parseFloat(this.settings.variables.amount[1]);e=e.replace("[amount]",t)}else if(e.includes(`[variable_${t}]`)){const i=new RegExp(`\\[variable_${t}\\]`,"g"),n=Math.floor(Math.random()*s.length);e=e.replace(i,s[n])}this.textBox.innerHTML=e}getTime(){return"stable"===this.settings.openTime.type?1e3*parseInt(this.settings.openTime.min):1e3*(Math.floor(Math.random()*(parseFloat(this.settings.openTime.max)-parseFloat(this.settings.openTime.min)))+parseFloat(this.settings.openTime.min))}setStorage(e,t){let s=JSON.parse(sessionStorage.getItem(this.elementId));null===s&&(s={}),s[e]=t,sessionStorage.setItem(this.elementId,JSON.stringify(s))}getStorage(e){let t=JSON.parse(sessionStorage.getItem(this.elementId));return null===t||null===t[e]||isNaN(t[e])?0:parseInt(t[e])}geoTargeting(){return!0!==this.settings.geotargeting.enabled||new Promise(((e,t)=>{fetch("https://get.geojs.io/v1/ip/country.json").then((e=>e.json())).then((t=>{this.settings.geotargeting.countries.includes(t.country)?e(!0):e(!1)})).catch((t=>{e(!0)}))}))}checkDevices(){return!(!0===this.settings.screenMax.enabled&&this.settings.screenMax.breakpoint<this.screen)&&!(!0===this.settings.screenMin.enabled&&this.settings.screenMin.breakpoint>this.screen)}objectToString(e){let t="";for(let s in e)t+=s+":"+e[s]+";";return t}}document.addEventListener("DOMContentLoaded",(function(){if("undefined"!=typeof HerdEffectsObj)for(var e in HerdEffectsObj){const t=document.getElementById(e),s=HerdEffectsObj[e];new HerdEffects(t,s)}}));